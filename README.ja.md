# [wsldl](https://github.com/yuk7/wsldl)
æ±ç”¨WSLãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©/ãƒ©ãƒ³ãƒãƒ£ãƒ¼

![screenshot](https://raw.githubusercontent.com/wiki/yuk7/wsldl/img/Arch_Alpine_Ubuntu.png)

[![Travis (.org)](https://img.shields.io/travis/yuk7/wsldl.svg?logo=Travis&style=flat-square)](https://travis-ci.org/yuk7/wsldl)
[![AppVeyor](https://img.shields.io/appveyor/ci/yuk7/wsldl.svg?logo=AppVeyor&style=flat-square)](https://ci.appveyor.com/project/yuk7/wsldl)
[![Github All Releases](https://img.shields.io/github/downloads/yuk7/wsldl/total.svg?style=flat-square)](https://github.com/yuk7/wsldl/releases/latest)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com)
![License](https://img.shields.io/github/license/yuk7/wsldl.svg?style=flat-square)



## ğŸ’»ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶
* Windows 10 1709 Fall Creators Update x64ä»¥é™
* WSLæ©Ÿèƒ½ãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨

## ğŸ“¦æ—¢ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(å¤–éƒ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)
#### 1. zipã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
[Alpine Linux](https://github.com/yuk7/AlpineWSL)

[Alpine Linux with Git-LFS and Sphinx](https://github.com/binarylandscapes/AlpineWSL) (by [binarylandscapes](https://github.com/binarylandscapes))

[Arch Linux](https://github.com/yuk7/ArchWSL)

[Artix Linux](https://github.com/hdk5/ArtixWSL) (by [hdk5](https://github.com/hdk5))

[CentOS](https://github.com/fbigun/WSL-Distro-Rootfs) (by [fbigun](https://github.com/fbigun))

[Void Linux (glibc)](https://github.com/am11/VoidWSL) (by [am11](https://github.com/am11))

[Void Linux (musl-libc)](https://github.com/am11/VoidMuslWSL) (by [am11](https://github.com/am11))

#### 2. zipå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ã¹ã¦åŒã˜å ´æ‰€ã«å±•é–‹

#### 3. exeã‚’å®Ÿè¡Œã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é–‹å§‹
exeã®ãƒ•ã‚¡ã‚¤ãƒ«åã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«åã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
ãƒªãƒãƒ¼ãƒ ã™ã‚‹ã“ã¨ã§ã”è‡ªç”±ãªåå‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã€è¤‡æ•°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚‚å¯èƒ½ã§ã™ã€‚


## ğŸ”§ã‚ãªãŸã®rootfsã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
#### 1. [Launcher.exeã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰](https://github.com/yuk7/wsldl/releases/latest)
#### 2. Launcher.exeã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç™»éŒ²ã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åã«å¤‰æ›´
(ä¾‹:Arch.exeã«ãƒªãƒãƒ¼ãƒ ã™ã‚‹ã¨ã€ŒArchã€ã¨ã„ã†åå‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚
#### 3. ã‚ãªãŸãŒç”¨æ„ã—ãŸrootfs.tar.gzã‚’exeã¨åŒã˜å ´æ‰€ã«é…ç½®ã—ã¾ã™ã€‚
#### 4. exeã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚
â€»ã‚ãªãŸã®rootfs.tar.gzã¨exeã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã—ã€è‡ªç”±ã«å†é…å¸ƒã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ğŸ“¦


## ğŸ“ä½¿ã„æ–¹(ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œ)
#### exe Usage
```cmd
Usage :
    <å¼•æ•°ãªã—>
      - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§æ–°ã—ã„ã‚·ã‚§ãƒ«ã‚’èµ·å‹•ã—ã¾ã™

    run <command line>
      - ä¸ãˆã‚‰ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å†…ã§å®Ÿè¡Œã—ã¾ã™ã€‚ ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå¼•ãç¶™ãŒã‚Œã¾ã™ã€‚

    config [setting [value]]
      - `--default-user <user>`: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’<user>ã«è¨­å®šã—ã¾ã™ã€‚
      - `--default-uid <uid>`: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®uidã‚’<uid>ã«è¨­å®šã—ã¾ã™ã€‚
      - `--append-path <on|off>`: Windowså´ã®PATHè¨­å®šã‚’Linuxå´ã«å¼•ãç¶™ãæ©Ÿèƒ½ã®on/offã‚’è¨­å®šã—ã¾ã™ã€‚
      - `--mount-drive <on|off>`: Windowsã®ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹æ©Ÿèƒ½ã®on/offã‚’è¨­å®šã—ã¾ã™ã€‚

    get [setting]
      - `--default-uid`: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®uidã‚’å–å¾—ã—ã¾ã™ã€‚
      - `--append-path`: Windowså´ã®PATHè¨­å®šã‚’Linuxå´ã«å¼•ãç¶™ãæ©Ÿèƒ½ã®on/offã‚’ç¢ºèªã—ã¾ã™ã€‚
      - `--mount-drive`: Windowsã®ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹æ©Ÿèƒ½ã®on/offã‚’ç¢ºèªã—ã¾ã™ã€‚
      - `--lxuid`: ã‚·ã‚¹ãƒ†ãƒ å†…éƒ¨ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹LxUIDã‚’å–å¾—ã—ã¾ã™ã€‚

    backup
      - tarã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ãŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
      
    clean
      - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

    help
      - helpã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
```


#### exeã‚’ãã®ã¾ã¾å®Ÿè¡Œ
ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå¼•ãç¶™ãŒã‚Œãšã€å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
```cmd
>{ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å}.exe
[root@PC-NAME ~]#
```

#### ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã•ã›ã‚‹
```cmd
>{ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å}.exe run uname -r
4.4.0-43-Microsoft

```

#### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼å¤‰æ›´(ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«idã‚³ãƒãƒ³ãƒ‰ãŒå¿…è¦ã§ã™)
```cmd
>{ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å}.exe config --default-user user

>{ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å}.exe
[user@PC-NAME dir]$
```

#### ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```cmd
>{ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å}.exe clean

```

## ğŸ› ãƒ“ãƒ«ãƒ‰æ–¹æ³•
### Windows

#### Visual Studio ã¾ãŸã¯ Build Tools 2017+

`é–‹ç™ºè€…ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ for Visual Studio`ã‚’ä½¿ã†ã‹ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å®Ÿè¡Œ
```cmd
:: locate VS base installation path using vswhere
SET vswherePath=%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere.exe
FOR /F "tokens=*" %i IN ('
      "%vswherePath%" -latest -prerelease -products *               ^
        -requires Microsoft.VisualStudio.Component.VC.Tools.x86.x64 ^
        -property installationPath'
      ) DO SET vsBase=%i

:: initialize x64 build environment
CALL "%vsBase%\vc\Auxiliary\Build\vcvarsall.bat" x64
```

Launcher.exeã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
```cmd
cl /nologo /O2 /W4 /WX /Ob2 /Oi /Oy /Gs- /GF /Gy /Tc main.c /Fe:Launcher.exe Advapi32.lib Shell32.lib
```

exeã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä»˜ã‘ã‚‹å ´åˆã¯ã€ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒªãƒ³ã‚¯ã—ã¾ã™
```cmd
SET YourDistroName=Fedora

:: ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
rc /nologo res\%YourDistroName%\res.rc

:: %YourDistroName%.exeã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
cl /nologo /O2 /W4 /WX /Ob2 /Oi /Oy /Gs- /GF /Gy /Tc main.c /Fe:%YourDistroName%.exe ^
  Advapi32.lib Shell32.lib res\%YourDistroName%\res.res
```

#### MinGW
x86_64ã®MSYS2(https://www.msys2.org)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’msys2ã‚·ã‚§ãƒ«ã§å®Ÿè¡Œã—ã¾ã™
```bash
$ pacman -S mingw-w64-x86_64-toolchain # ãƒ„ãƒ¼ãƒ«ãƒã‚§ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
$ gcc -std=c99 --static main.c -o Launcher.exe # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
```

exeã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä»˜ã‘ã‚‹å ´åˆã¯ã€ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒªãƒ³ã‚¯ã—ã¾ã™
```bash
YourDistroName=Fedora
$ windres res/$YourDistroName/res.rc res.o # ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
$ gcc -std=c99 --static main.c -o Launcher.exe res.o # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
```

### Linux (ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«)
gcc-mingw-w64-x86-64ãŒå«ã¾ã‚Œã‚‹mingw-w64ãƒ„ãƒ¼ãƒ«ãƒã‚§ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™
```bash
 $ x86_64-w64-mingw32-gcc -std=c99 --static main.c -o Launcher.exe # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
```
## ğŸ“„ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
[MIT](https://github.com/yuk7/wsldl/blob/master/LICENSES.md)

Copyright (c) 2017-2019 yuk7
